<!DOCTYPE html>
<html>
<head>
    <title>Postcode Charity Finder</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .service { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 8px; }
        .local { background-color: #e6f7ff; }
        .nationwide { background-color: #fffbe6; }
        h2 { margin-top: 0; }
    </style>
</head>
<body>
    <h1>Postcode Charity Finder</h1>
    <form method="POST">
        <label for="postcode">Postcode:</label>
        <input type="text" id="postcode" name="postcode" required><br><br>

        <label for="need">Category:</label>
        <select name="need" id="need">
            <option value="">All categories</option>
            {% for category in categories %}
                <option value="{{ category|lower }}">{{ category }}</option>
            {% endfor %}
        </select><br><br>

        <button type="submit">Search</button>
    </form>

    <hr>

    {% if results %}
        <h2>Results:</h2>
        {% for service in results %}
            <div class="service {% if service.is_nationwide %}nationwide{% else %}local{% endif %}">
                <h3>{{ service.name }}</h3>
                <p><strong>Categories:</strong> {{ service.categories }}</p>
                <p><strong>Website:</strong> <a href="{{ service.website }}" target="_blank">{{ service.website }}</a></p>
                <p><strong>Phone:</strong> {{ service.phone }}</p>
                <p><em>{{ "Nationwide service" if service.is_nationwide else "Available in your area" }}</em></p>
            </div>
        {% endfor %}
    {% elif request.method == "POST" %}
        <p>No matching services found.</p>
    {% endif %}
</body>
</html>
